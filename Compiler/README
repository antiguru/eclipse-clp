Standard installation
---------------------

If you are just building ECLiPSe from the repository sources,
there is no need to (re)build the compiler - the corresponding
.eco files are already in the repository as "bootfiles" (sepia/lib/*.eco).

The 'make install' command here just builds the compiler documentation.



Making changes to the compiler
------------------------------

Before you start changing the compiler, build an aux_compiler, which
is needed for compiling your modified compiler.  This aux_compiler
is just a normal compiler, but with all its modules renamed to aux_...
You need to do this only once, and it should be done from stable
compiler sources (the build is done using the stable compiler/runtime
in ../bin)

    % make aux_eco

Now you can edit the compiler sources and compile the result:
(this compile is done using the stable runtime in ../bin and the aux_compiler)

    % make eco

This creates local compiler_XXX.eco files which can be used for testing.
(testing the stable runtime plus the modified compiler)
To run the test suite:

    % make test 
    % make testo

Or, to test this compiler manually:

    % ../bin/$ARCH/eclipse

    ?- use_module(compiler_top).
    ?- ...<you are now working with your modified compiler>...


Then, add the tested compiler to the kernel by copying the .eco files:

    % make bootfiles

Do not forget to check-in the modified bootfiles along with your
modified sources!!!!  They are in <eclipsedir>/sepia/lib/*.eco



Making changes to the compiler AND the runtime system
-----------------------------------------------------

Edit/build copy the compiler sources as above.  Then go to

    % cd ../sepia/$ARCH

Here, edit the runtime, e.g. emulator sources and build it

    % make

You can then run the local sepia executable, giving you the modified
runtime and the modified compiler

    % ./sepia
    ?- ...<you are now working with your modified compiler>...

Once things seem to work:

    % make install

The updated system is now in <eclipsedir>/...
Test the new runtime with the new compiler:

    % cd <eclipsedir>/Compiler
    % make test
    % make testo

Repeat all these steps to get the new compiler compiled with itself.

Also, rebuild all library .eco files with the modified compiler.
